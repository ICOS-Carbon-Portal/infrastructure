<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

<style>
    .tooltip-inner {
        max-width: 300px;
        text-align: left;
    }

    .form-check-input[type="radio"] {
        border-color: #aaa;
    }
</style>

<div class="container text-center my-4">
    <p>Please choose one of the available notebook environments:</p>

    <div class="row text-start g-3">

        <!-- Explore ICOS Data Notebooks Section -->
        <div class="col-lg-6">
            <h4 class="fw-bold text-success d-flex align-items-center" style="cursor: pointer;"
                data-bs-toggle="collapse" data-bs-target="#exploreIcosDataList" aria-expanded="false" aria-controls="exploreIcosDataList">
                <i class="bi bi-caret-right-fill me-2 rotate-icon" style="transition: transform 0.2s;"></i>
                Explore ICOS Data
                <span class="custom-tooltip ms-2" data-bs-toggle="tooltip" data-bs-placement="top"
                      title="Notebooks that process ICOS data, compute statistics, generate interactive visualizations
                          (plots, maps, tables), and showcase scientific outputs from ICOS projects and educational workshops."
                      style="cursor: pointer;">
                    <i class="bi bi-question-circle"></i>
                </span>
            </h4>
            <div class="collapse mt-2 ps-2" id="exploreIcosDataList">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="curve_fitting_obspack" value="icos-notebooks:latest&nb=curve_fitting_obspack.ipynb">
                    <label class="form-check-label" for="curve_fitting_obspack">curve_fitting_obspack.ipynb</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="icos_atmobs_statistics" value="icos-notebooks:latest&nb=icos_atmObs_statistics.ipynb">
                    <label class="form-check-label" for="icos_atmobs_statistics">icos_atmObs_statistics.ipynb</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="station_characterization" value="icos-notebooks:latest&nb=station_characterization.ipynb">
                    <label class="form-check-label" for="station_characterization">station_characterization.ipynb</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ICOS_flasksampling_fossilfuel" value="icos-notebooks:latest&nb=ICOS_flasksampling_fossilfuel.ipynb">
                    <label class="form-check-label" for="ICOS_flasksampling_fossilfuel">ICOS_flasksampling_fossilfuel.ipynb</label>
                </div>
            </div>
        </div>

        <!-- Examples Notebooks Section -->
        <div class="col-lg-6">
            <h4 class="fw-bold text-success d-flex align-items-center" style="cursor: pointer;"
                data-bs-toggle="collapse" data-bs-target="#examplesList" aria-expanded="false" aria-controls="examplesList">
                <i class="bi bi-caret-right-fill me-2 rotate-icon" style="transition: transform 0.2s;"></i>
                Examples
                <span class="custom-tooltip ms-2" data-bs-toggle="tooltip" data-bs-placement="top"
                      title="This is a good place to start exploring ICOS data. Notebooks under this category showcase
                      how to use the ICOS Carbon Portal Python libraries which give you access to data products provided by ICOS."
                      style="cursor: pointer;">
                    <i class="bi bi-question-circle"></i>
                </span>
            </h4>
            <div class="collapse mt-2 ps-2" id="examplesList">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex1" value="examples:latest&nb=ex1 - Access a Single Dataset.ipynb">
                    <label class="form-check-label" for="ex1" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access ICOS observations and extract data and metadata information.">
                        ex1 - Access a Single Dataset</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex1a" value="examples:latest&nb=ex1a - Work with Atmospheric Data.ipynb">
                    <label class="form-check-label" for="ex1a" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access atmospheric ICOS observations and extract data and metadata information.">
                        ex1a - Work with Atmospheric Data</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex1b" value="examples:latest&nb=ex1b - Work with Ecosystem Data.ipynb">
                    <label class="form-check-label" for="ex1b" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access ecosystem ICOS observations and extract data and metadata information.">
                        ex1b - Work with Ecosystem Data</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex1c" value="examples:latest&nb=ex1c - Work with Ocean Data.ipynb">
                    <label class="form-check-label" for="ex1c" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access oceanic ICOS observations and extract data and metadata information.">
                        ex1c - Work with Ocean Data</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex2" value="examples:latest&nb=ex2 - Explore ICOS Stations.ipynb">
                    <label class="form-check-label" for="ex2" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access, extract, and process data and metadata information for ICOS stations.">
                        ex2 - Explore ICOS Stations</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex3" value="examples:latest&nb=ex3 - Combine ICOS & PANGAEA Data.ipynb">
                    <label class="form-check-label" for="ex3" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Combine information from two independent data sets â€” one from the ICOS Carbon Portal
                           and one from PANGAEA, both containing ocean observations from Europe to South America.">
                        ex3 - Combine ICOS & PANGAEA Data</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex4" value="examples:latest&nb=ex4 - Access Collection Data & Metadata.ipynb">
                    <label class="form-check-label" for="ex4" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access data and metadata of ICOS collections.">
                        ex4 - Access Collection Data & Metadata</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex5" value="examples:latest&nb=ex5 - Query Metadata with SPARQL.ipynb">
                    <label class="form-check-label" for="ex5" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access data and metadata for ICOS stations and observations using SPARQL queries.">
                        ex5 - Query Metadata with SPARQL</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex6a" value="examples:latest&nb=ex6a - Search STILT Stations.ipynb">
                    <label class="form-check-label" for="ex6a" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Search for stations with available STILT model results.">
                        ex6a - Search STILT Stations</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex6b" value="examples:latest&nb=ex6b - Animate STILT Footprints.ipynb">
                    <label class="form-check-label" for="ex6b" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Search for STILT stations, load modeled data, and create simple visualizations and
                           animations.">
                        ex6b - Animate STILT Footprints</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex6c" value="examples:latest&nb=ex6c - Plot STILT Time Series & Footprints.ipynb">
                    <label class="form-check-label" for="ex6b" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Load STILT time series data and footprints, and create plots and maps using Holoviews
                            and Geoviews.">
                        ex6c - Plot STILT Time Series & Footprints</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex7" value="examples:latest&nb=ex7 - Read ObsPack Collections.ipynb">
                    <label class="form-check-label" for="ex7" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Read and explore the European ObsPack compilation and related ICOS data products.">
                        ex7 - Read ObsPack Collections</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex8" value="examples:latest&nb=ex8 - Authenticate for Remote Data Access.ipynb">
                    <label class="form-check-label" for="ex8" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Authenticate and accept required licenses to access ICOS, ICOS Cities, and SITES data
                            portals.">
                        ex8 - Authenticate for Remote Data Access</label>
                </div>
            </div>
        </div>

        <!-- DOI/PID Notebooks Section -->
        <div class="col-lg-6">
            <h4 class="fw-bold text-success d-flex align-items-center" style="cursor: pointer;"
                data-bs-toggle="collapse" data-bs-target="#notebooksWithDoiList" aria-expanded="false" aria-controls="notebooksWithDoiList">
                <i class="bi bi-caret-right-fill me-2 rotate-icon" style="transition: transform 0.2s;"></i>
                Notebooks with DOI
                <span class="custom-tooltip ms-2" data-bs-toggle="tooltip" data-bs-placement="top"
                      title="The notebooks here are connected to scientific publications or persistent identified
                      datasets and provide software, scripts, interactive tools, showcasing how to compute and analyze
                      the data, and create the figures published in the manuscript."
                      style="cursor: pointer;">
                    <i class="bi bi-question-circle"></i>
                </span>
            </h4>

            <div class="collapse mt-2 ps-2" id="notebooksWithDoiList">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="city-characterization-tool" value="icos-notebooks:latest&nb=city-characterization-tool">
                    <label class="form-check-label" for="city-characterization-tool">
                        city-characterization-tool
                        (<a href="https://doi.org/10.18160/P8SV-B99F" target="_blank">10.18160/P8SV-B99F</a>)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ecosystem_site_anomaly_visualization" value="icos-notebooks:latest&nb=ecosystem_site_anomaly_visualization.ipynb">
                    <label class="form-check-label" for="ecosystem_site_anomaly_visualization">
                        ecosystem_site_anomaly_visualization.ipynb
                        (<a href="https://doi.org/10.18160/4QPK-2N7W" target="_blank">10.18160/4QPK-2N7W</a>)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="network-view-tool" value="icos-notebooks:latest&nb=network-view-tool">
                    <label class="form-check-label" for="network-view-tool">
                        network-view-tool
                        (<a href="https://doi.org/10.18160/AMET-9KWT" target="_blank">10.18160/AMET-9KWT</a>)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="radiocarbon" value="icos-notebooks:latest&nb=radiocarbon.ipynb">
                    <label class="form-check-label" for="radiocarbon">
                        radiocarbon.ipynb
                        (<a href="https://doi.org/10.18160/GATA-SGZ5" target="_blank">10.18160/GATA-SGZ5</a>)
                    </label>
                </div>
            </div>
        </div>

        <!-- Education Notebooks Section -->
        <div class="col-lg-6">
            <h4 class="fw-bold text-success d-flex align-items-center" style="cursor: pointer;"
                data-bs-toggle="collapse" data-bs-target="#educationList" aria-expanded="false" aria-controls="educationList">
                <i class="bi bi-caret-right-fill me-2 rotate-icon" style="transition: transform 0.2s;"></i>
                Education
                <span class="custom-tooltip ms-2" data-bs-toggle="tooltip" data-bs-placement="top"
                      title="Here we provide specific collections of notebooks for workshops or university courses."
                      style="cursor: pointer;">
                    <i class="bi bi-question-circle"></i>
                </span>
            </h4>
            <div class="collapse mt-2 ps-2" id="educationList">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="summer_school" value="summer-school:latest&nb=summer_school">
                    <label class="form-check-label" for="summer_school">Summer School 2025</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="envrifair_winterschool" value="icos-notebooks:latest&nb=envrifair_winterschool">
                    <label class="form-check-label" for="envrifair_winterschool">Envrifair Winterschool</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="otc_data_reduction_workshop" value="icos-notebooks:latest&nb=otc_data_reduction_workshop">
                    <label class="form-check-label" for="otc_data_reduction_workshop">OTC Data Reduction Workshop</label>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Initialize span tooltips without delay enabled
        const tooltipSpanTriggerList = document.querySelectorAll('span[data-bs-toggle="tooltip"]');
        tooltipSpanTriggerList.forEach(el => new bootstrap.Tooltip(el));

        // Initialize label tooltips with delay enabled
        const tooltipLabelTriggerList = document.querySelectorAll('label[data-bs-toggle="tooltip"]');
        tooltipLabelTriggerList.forEach(el => new bootstrap.Tooltip(el, {delay: { show: 500, hide: 100 }}));

        // Handle collapse arrow rotation for all categories
        const collapsibleHeaders = document.querySelectorAll('[data-bs-toggle="collapse"]');

        collapsibleHeaders.forEach(header => {
            const targetSelector = header.getAttribute('data-bs-target');
            const collapseEl = document.querySelector(targetSelector);
            const arrowIcon = header.querySelector('.rotate-icon');

            // Rotate arrow on collapse show
            collapseEl.addEventListener('show.bs.collapse', () => {
                arrowIcon.style.transform = 'rotate(90deg)';
            });

            // Rotate arrow back on collapse hide
            collapseEl.addEventListener('hide.bs.collapse', () => {
                arrowIcon.style.transform = 'rotate(0deg)';
            });
        });

        // Disable start button by default, then enable once selection made
        const startButton = document.querySelector('button[type="submit"]');
        startButton.disabled = true;

        document.addEventListener("change", (e) => {
            if (startButton.disabled && e.target.name == "env") {
                startButton.disabled = false;
            }
        });
    });
</script>
