<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

<style>
    .tooltip-inner {
        max-width: 300px;
        text-align: left;
    }

    .form-check-input[type="radio"] {
        border-color: #aaa;
    }
</style>

<div class="container text-center my-4">
    <p>Please choose one of the available notebook environments:</p>

    <div class="row text-start g-3">

        <!-- Explore ICOS Data Notebooks Section -->
        <div class="col-lg-6">
            <h4 class="fw-bold text-success d-flex align-items-center" style="cursor: pointer;"
                data-bs-toggle="collapse" data-bs-target="#exploreIcosDataList" aria-expanded="false" aria-controls="exploreIcosDataList">
                <i class="bi bi-caret-right-fill me-2 rotate-icon" style="transition: transform 0.2s;"></i>
                Explore ICOS Data
                <span class="custom-tooltip ms-2" data-bs-toggle="tooltip" data-bs-placement="top"
                      title="Notebooks that process ICOS data, compute statistics, generate interactive visualizations
                          (plots, maps, tables), and showcase scientific outputs from ICOS projects and educational
                          workshops."
                      style="cursor: pointer;">
                    <i class="bi bi-question-circle"></i>
                </span>
            </h4>
            <div class="collapse mt-2 ps-2" id="exploreIcosDataList">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="nocfibs" value="icos-notebooks:latest&nb=nocfibs">
                    <label class="form-check-label" for="nocfibs" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Apply the NOAA curve-fitting method to ObsPack CO₂ time series and follow the
                           filtering, fitting, and growth-rate steps to reproduce the full workflow.">
                        NOAA Curve Fitting for ObsPack CO₂</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="icatobs" value="icos-notebooks:latest&nb=icatobs">
                    <label class="form-check-label" for="icatobs" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Explore ICOS atmosphere observations through summary statistics and interactive
                           visuals, and compare results across different stations.">
                        ICOS Atmospheric Observation Statistics</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="chatmes" value="icos-notebooks:latest&nb=chatmes">
                    <label class="form-check-label" for="chatmes" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Create footprint-based characterizations of stations using STILT along with emissions,
                            biogenic-flux, and ancillary data, and analyze any point available in the STILT domain.">
                        Characterization of Atmospheric Measurement Stations</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="hifoe" value="icos-notebooks:latest&nb=hifoe">
                    <label class="form-check-label" for="hifoe" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Identify high fossil-CO₂ events by selecting a CO-offset threshold using ICOS
                           measurement time series and STILT footprints and concentration time series for applicable
                           stations.">
                        High Fossil CO₂ Events at ICOS Stations</label>
                </div>
            </div>
        </div>

        <!-- Examples Notebooks Section -->
        <div class="col-lg-6">
            <h4 class="fw-bold text-success d-flex align-items-center" style="cursor: pointer;"
                data-bs-toggle="collapse" data-bs-target="#examplesList" aria-expanded="false" aria-controls="examplesList">
                <i class="bi bi-caret-right-fill me-2 rotate-icon" style="transition: transform 0.2s;"></i>
                Examples
                <span class="custom-tooltip ms-2" data-bs-toggle="tooltip" data-bs-placement="top"
                      title="This is a good place to start exploring ICOS data. Notebooks under this category showcase
                      how to use the ICOS Carbon Portal Python libraries which give you access to data products provided
                       by ICOS."
                      style="cursor: pointer;">
                    <i class="bi bi-question-circle"></i>
                </span>
            </h4>
            <div class="collapse mt-2 ps-2" id="examplesList">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex1" value="examples:latest&nb=ex1">
                    <label class="form-check-label" for="ex1" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access ICOS observations and extract data and metadata information.">
                        ex1 - Access a Single Dataset</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex1a" value="examples:latest&nb=ex1a">
                    <label class="form-check-label" for="ex1a" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access atmospheric ICOS observations and extract data and metadata information.">
                        ex1a - Work with Atmospheric Data</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex1b" value="examples:latest&nb=ex1b">
                    <label class="form-check-label" for="ex1b" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access ecosystem ICOS observations and extract data and metadata information.">
                        ex1b - Work with Ecosystem Data</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex1c" value="examples:latest&nb=ex1c">
                    <label class="form-check-label" for="ex1c" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access oceanic ICOS observations and extract data and metadata information.">
                        ex1c - Work with Ocean Data</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex2" value="examples:latest&nb=ex2">
                    <label class="form-check-label" for="ex2" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access, extract, and process data and metadata information for ICOS stations.">
                        ex2 - Explore ICOS Stations</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex3" value="examples:latest&nb=ex3">
                    <label class="form-check-label" for="ex3" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Combine information from two independent data sets — one from the ICOS Carbon Portal
                           and one from PANGAEA, both containing ocean observations from Europe to South America.">
                        ex3 - Combine ICOS & PANGAEA Data</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex4" value="examples:latest&nb=ex4">
                    <label class="form-check-label" for="ex4" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access data and metadata of ICOS collections.">
                        ex4 - Access Collection Data & Metadata</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex5" value="examples:latest&nb=ex5">
                    <label class="form-check-label" for="ex5" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Access data and metadata for ICOS stations and observations using SPARQL queries.">
                        ex5 - Query Metadata with SPARQL</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex6a" value="examples:latest&nb=ex6a">
                    <label class="form-check-label" for="ex6a" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Search for stations with available STILT model results.">
                        ex6a - Search STILT Stations</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex6b" value="examples:latest&nb=ex6b">
                    <label class="form-check-label" for="ex6b" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Search for STILT stations, load modeled data, and create simple visualizations and
                           animations.">
                        ex6b - Animate STILT Footprints</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex6c" value="examples:latest&nb=ex6c">
                    <label class="form-check-label" for="ex6b" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Load STILT time series data and footprints, and create plots and maps using Holoviews
                            and Geoviews.">
                        ex6c - Plot STILT Time Series & Footprints</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex7" value="examples:latest&nb=ex7">
                    <label class="form-check-label" for="ex7" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Read and explore the European ObsPack compilation and related ICOS data products.">
                        ex7 - Read ObsPack Collections</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ex8" value="examples:latest&nb=ex8">
                    <label class="form-check-label" for="ex8" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Authenticate and accept required licenses to access ICOS, ICOS Cities, and SITES data
                            portals.">
                        ex8 - Authenticate for Remote Data Access</label>
                </div>
            </div>
        </div>

        <!-- Notebooks with DOI Section -->
        <div class="col-lg-6">
            <h4 class="fw-bold text-success d-flex align-items-center" style="cursor: pointer;"
                data-bs-toggle="collapse" data-bs-target="#notebooksWithDoiList" aria-expanded="false" aria-controls="notebooksWithDoiList">
                <i class="bi bi-caret-right-fill me-2 rotate-icon" style="transition: transform 0.2s;"></i>
                Notebooks with DOI
                <span class="custom-tooltip ms-2" data-bs-toggle="tooltip" data-bs-placement="top"
                      title="The notebooks here are connected to scientific publications or persistent identified
                      datasets and provide software, scripts, interactive tools, showcasing how to compute and analyze
                      the data, and create the figures published in the manuscript."
                      style="cursor: pointer;">
                    <i class="bi bi-question-circle"></i>
                </span>
            </h4>

            <div class="collapse mt-2 ps-2" id="notebooksWithDoiList">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="cichato" value="icos-notebooks:latest&nb=cichato">
                    <label class="form-check-label" for="cichato" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Explore CO₂-monitoring challenges across European cities using CMC-CITYMAP tools, and
                           generate the characterization and clustering analyses used in the study.">
                        City Characterization Tool
                        (<a href="https://doi.org/10.18160/P8SV-B99F" target="_blank">10.18160/P8SV-B99F</a>)</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ecosav" value="icos-notebooks:latest&nb=ecosav">
                    <label class="form-check-label" for="ecosav" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Visualize ecosystem anomalies by comparing daily averages with long-term reference
                           data, shown monthly or day-by-day, including effects from weather, crop cycles, or land-use
                           changes.">
                        Ecosystem Site Anomaly Visualization
                        (<a href="https://doi.org/10.18160/4QPK-2N7W" target="_blank">10.18160/4QPK-2N7W</a>)</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="nevito" value="icos-notebooks:latest&nb=nevito">
                    <label class="form-check-label" for="nevito" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Analyze the spatial coverage of atmospheric station networks using STILT footprints,
                           including land cover and flux information, and explore both current, future, or user-defined
                           station networks.">
                        Network View Tool
                        (<a href="https://doi.org/10.18160/AMET-9KWT" target="_blank">10.18160/AMET-9KWT</a>)</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="riflas" value="icos-notebooks:latest&nb=riflas">
                    <label class="form-check-label" for="riflas" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Provide analyses of STILT model results and ICOS measurement time series to develop
                           and test a dedicated flask-sampling strategy with an automated sampler.">
                        RINGO Flask-Sampling(Task 1.3)
                        (<a href="https://doi.org/10.18160/FSS2-SH26" target="_blank">10.18160/FSS2-SH26</a>)</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="raca" value="icos-notebooks:latest&nb=raca">
                    <label class="form-check-label" for="raca" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Estimate radiocarbon (Δ¹⁴C) values by combining STILT footprints with anthropogenic
                           and biogenic flux data, and compare modelled results with measurements through interactive
                           maps and plots.">
                        Radiocarbon
                        (<a href="https://doi.org/10.18160/GATA-SGZ5" target="_blank">10.18160/GATA-SGZ5</a>)</label>
                </div>
            </div>
        </div>

        <!-- Education Notebooks Section -->
        <div class="col-lg-6">
            <h4 class="fw-bold text-success d-flex align-items-center" style="cursor: pointer;"
                data-bs-toggle="collapse" data-bs-target="#educationList" aria-expanded="false" aria-controls="educationList">
                <i class="bi bi-caret-right-fill me-2 rotate-icon" style="transition: transform 0.2s;"></i>
                Education
                <span class="custom-tooltip ms-2" data-bs-toggle="tooltip" data-bs-placement="top"
                      title="Here we provide specific collections of notebooks for workshops or university courses."
                      style="cursor: pointer;">
                    <i class="bi bi-question-circle"></i>
                </span>
            </h4>
            <div class="collapse mt-2 ps-2" id="educationList">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="enwishc" value="icos-notebooks:latest&nb=enwishc">
                    <label class="form-check-label" for="enwishc" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="ENVRIFAIR Winterschool notebooks showing how to load ICOS data products and build
                           interactive maps.">
                        Envrifair Winter School</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="otcdrew" value="icos-notebooks:latest&nb=otcdrew">
                    <label class="form-check-label" for="otcdrew" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Ocean Thematic Centre workshop exercises on calibrating and processing
                           instrument-based oceanic CO₂ measurements.">
                        OTC Data Reduction Workshop</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="ocecaco" value="ocean-carbon-course:latest&nb=ocecaco">
                    <label class="form-check-label" for="ocecaco" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="A collection of teaching notebooks for ocean carbon science, guiding users through
                           key concepts using interactive analysis and real datasets.">
                        Ocean carbon practicals 2025</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="suschoo" value="summer-school:latest&nb=suschoo">
                    <label class="form-check-label" for="suschoo" data-bs-toggle="tooltip" data-bs-placement="right"
                           title="Learn about greenhouse gas measurements, carbon cycle science, and ICOS data through
                           lectures and hands-on training offered at the annual ICOS Summer School.">
                        Summer School 2025</label>
                </div>
            </div>
        </div>

        <!-- Classic Environment Section -->
        <div class="col-lg-6">
            <h4 class="fw-bold text-success d-flex align-items-center" style="cursor: pointer;"
                data-bs-toggle="collapse" data-bs-target="#classicList" aria-expanded="false" aria-controls="classicList">
                <i class="bi bi-caret-right-fill me-2 rotate-icon" style="transition: transform 0.2s;"></i>
                Classic Environment
                <span class="custom-tooltip ms-2" data-bs-toggle="tooltip" data-bs-placement="top"
                      title="Launch the Classic environment, with all notebooks through November 2025 available in a single environment."
                      style="cursor: pointer;">
                    <i class="bi bi-question-circle"></i>
                </span>
            </h4>
            <div class="collapse mt-2 ps-2" id="classicList">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="env"
                           id="classic" value="classic:latest&nb=classic">
                    <label class="form-check-label" for="classic">Classic Environment</label>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Initialize span tooltips without delay enabled
        const tooltipSpanTriggerList = document.querySelectorAll('span[data-bs-toggle="tooltip"]');
        tooltipSpanTriggerList.forEach(el => new bootstrap.Tooltip(el));

        // Initialize label tooltips with delay enabled
        const tooltipLabelTriggerList = document.querySelectorAll('label[data-bs-toggle="tooltip"]');
        tooltipLabelTriggerList.forEach(el => new bootstrap.Tooltip(el, {delay: { show: 500, hide: 100 }}));

        // Handle collapse arrow rotation for all categories
        const collapsibleHeaders = document.querySelectorAll('[data-bs-toggle="collapse"]');

        collapsibleHeaders.forEach(header => {
            const targetSelector = header.getAttribute('data-bs-target');
            const collapseEl = document.querySelector(targetSelector);
            const arrowIcon = header.querySelector('.rotate-icon');

            // Rotate arrow on collapse show
            collapseEl.addEventListener('show.bs.collapse', () => {
                arrowIcon.style.transform = 'rotate(90deg)';
            });

            // Rotate arrow back on collapse hide
            collapseEl.addEventListener('hide.bs.collapse', () => {
                arrowIcon.style.transform = 'rotate(0deg)';
            });
        });

        // Disable start button by default, then enable once selection made
        const startButton = document.querySelector('button[type="submit"]');
        startButton.disabled = true;

        document.addEventListener("change", (e) => {
            if (startButton.disabled && e.target.name == "env") {
                startButton.disabled = false;
            }
        });
    });
</script>
